---
# Systeminformationen sammeln
- name: System-Informationen sammeln
  hosts: all
  gather_facts: true

  tasks:
    - name: Zeige Systeminformationen
      ansible.builtin.debug:
        msg:
          - "Hostname: {{ ansible_hostname }}"
          - "FQDN: {{ ansible_fqdn }}"
          - "OS: {{ ansible_distribution }} {{ ansible_distribution_version }}"
          - "Kernel: {{ ansible_kernel }}"
          - "Architektur: {{ ansible_architecture }}"
          - "CPUs: {{ ansible_processor_vcpus }}"
          - "RAM: {{ (ansible_memtotal_mb / 1024) | round(1) }} GB"
          - "IPv4: {{ ansible_default_ipv4.address | default('N/A') }}"

    - name: Zeige Festplatten
      ansible.builtin.debug:
        msg: "{{ item.mount }}: {{ (item.size_total / 1073741824) | round(1) }} GB ({{ ((item.size_total - item.size_available) / item.size_total * 100) | round(1) }}% belegt)"
      loop: "{{ ansible_mounts }}"
      when: item.size_total > 0

    - name: Zeige Uptime
      ansible.builtin.command: uptime -p
      register: uptime_result
      changed_when: false

    - name: Uptime Ausgabe
      ansible.builtin.debug:
        msg: "Uptime: {{ uptime_result.stdout }}"
